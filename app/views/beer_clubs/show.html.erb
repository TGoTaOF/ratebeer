<p id="notice"><%= notice %></p>

<h2>
  <strong><%= @beer_club.name %> <%= @beer_club.city %></strong>
</h2>

<p>
  Founded <%= @beer_club.founded %>
</p>

<h3>
  <strong> Members </strong>
</h3>
<% if @beer_club.memberships.empty? %>
  <p>
    Club has no members.
  </p>
<% else %>
  <ul>
    <% @beer_club.memberships.each do |membership| %>
      <li>
        <%= link_to membership.user.username, user_path(membership.user) %>
      </li>
    <% end %>
  </ul>
<% end %>

<% if not current_user.nil? %>
	<% if !@beer_club.members.find_by(id: current_user.id) %>
		<h4>Join the club</h4>
		<p>
			<%= form_for(@membership) do |f| %>
				<%= f.hidden_field :beer_club_id %>
				<%= f.submit value:"join the club" %>
			<% end %>
		</p>
	<% else %>
		<p>
			<%= form_for(@membership, method: "delete") do |f| %>
				<%= f.hidden_field :beer_club_id %>
				<%= f.submit value: "end the membership" %>
		 	<% end %>
		</p>
 	<% end %>
  
  <%= link_to 'Edit', edit_beer_club_path(@beer_club) %>
  <%= link_to 'Destroy',  @beer_club, method: :delete, data: { confirm: 'Are you sure?' } %>
<% end %>
